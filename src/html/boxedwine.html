<!DOCTYPE html>
<html class="bw-html" lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="boxedwine authors" content="James Bryant, Kevin O'Dwyer" />
  <link rel="preload" href="boxedwine.zip" as="fetch" crossorigin>
  <link rel="preload" href="boxedwine.wasm" as="fetch" type="application/wasm" crossorigin>
  <meta name="robots" content="noindex, nofollow">
  <title>Document</title>
  <link rel="stylesheet" type="text/css" href="style.css" />
</head>

<body class="boxedwine-body">
  <div id="loading">
    <figure id="spinner" style="overflow: visible">
      <div class="spinner" style="margin-top: 0.5em; margin-left: auto; margin-right: auto"></div>
    </figure>
    <div class="emscripten" id="status">Downloading...</div>
    <div class="emscripten">
      <progress value="0" max="100" id="progress"></progress>
    </div>
  </div>
  <div id="bw-root"></div>
  <noscript> You need to enable JavaScript to run this app. </noscript>
  <script>
    // Initialize Module - let Emscripten handle WASM loading
    var Module = {};
    
    Module.print = function(text) {
      if (arguments.length > 1) text = Array.prototype.slice.call(arguments).join(' ');
      console.log(text);
    };
    
    Module.printErr = function(text) {
      if (arguments.length > 1) text = Array.prototype.slice.call(arguments).join(' ');
      console.error(text);
    };
    
    Module.setStatus = function(text) {
      var statusElement = document.getElementById('status');
      if (statusElement && text) statusElement.innerHTML = text;
    };
    
    window.Module = Module;
    window.boxedwineLoaded = false;
    
    // Load boxedwine.js after canvas is ready
    window.loadBoxedwine = function(canvasElement) {
      if (window.boxedwineLoaded) return;
      window.boxedwineLoaded = true;
      
      // Set canvas on Module before loading
      if (canvasElement) {
        Module.canvas = canvasElement;
      }
      
      // Dynamically load boxedwine.js
      var script = document.createElement('script');
      script.src = 'boxedwine.js';
      script.async = false;
      document.body.appendChild(script);
    };
  </script>
  <script src="index-bw.js"></script>
</body>

</html>